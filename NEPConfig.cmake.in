# NFEPConfig.cmake.in - CMake configuration file for NFEP
# Generated from NFEPConfig.cmake.in by CMake

@PACKAGE_INIT@

set(NFEP_VERSION "@PROJECT_VERSION@")

# Set the installation prefix
set(NFEP_INSTALL_PREFIX "@CMAKE_INSTALL_PREFIX@")

# Library installation directory
set(NFEP_LIBRARY_DIR "@CMAKE_INSTALL_FULL_LIBDIR@")

# Include directory
set(NFEP_INCLUDE_DIR "@CMAKE_INSTALL_FULL_INCLUDEDIR@")

# Available VOL connectors (set during build)
set(NFEP_HAVE_GRIB2 @HAVE_GRIB2@)
set(NFEP_HAVE_BUFR @HAVE_BUFR@)
set(NFEP_HAVE_GEOTIFF @HAVE_GEOTIFF@)
set(NFEP_HAVE_CDF @HAVE_CDF@)

# Initialize target list
set(NFEP_LIBRARIES "")
set(NFEP_VOL_CONNECTORS "")

# Define imported targets for available VOL connectors
if(NFEP_HAVE_GRIB2)
    if(NOT TARGET NFEP::grib2_vol_connector)
        add_library(NFEP::grib2_vol_connector SHARED IMPORTED)
        set_target_properties(NFEP::grib2_vol_connector PROPERTIES
            IMPORTED_LOCATION "${NFEP_LIBRARY_DIR}/libgrib2_vol_connector.so"
            INTERFACE_INCLUDE_DIRECTORIES "${NFEP_INCLUDE_DIR}"
        )
        list(APPEND NFEP_LIBRARIES NFEP::grib2_vol_connector)
        list(APPEND NFEP_VOL_CONNECTORS "GRIB2")
    endif()
endif()

if(NFEP_HAVE_BUFR)
    if(NOT TARGET NFEP::bufr_vol_connector)
        add_library(NFEP::bufr_vol_connector SHARED IMPORTED)
        set_target_properties(NFEP::bufr_vol_connector PROPERTIES
            IMPORTED_LOCATION "${NFEP_LIBRARY_DIR}/libbufr_vol_connector.so"
            INTERFACE_INCLUDE_DIRECTORIES "${NFEP_INCLUDE_DIR}"
        )
        list(APPEND NFEP_LIBRARIES NFEP::bufr_vol_connector)
        list(APPEND NFEP_VOL_CONNECTORS "BUFR")
    endif()
endif()

if(NFEP_HAVE_GEOTIFF)
    if(NOT TARGET NFEP::geotiff_vol_connector)
        add_library(NFEP::geotiff_vol_connector SHARED IMPORTED)
        set_target_properties(NFEP::geotiff_vol_connector PROPERTIES
            IMPORTED_LOCATION "${NFEP_LIBRARY_DIR}/libgeotiff_vol_connector.so"
            INTERFACE_INCLUDE_DIRECTORIES "${NFEP_INCLUDE_DIR}"
        )
        list(APPEND NFEP_LIBRARIES NFEP::geotiff_vol_connector)
        list(APPEND NFEP_VOL_CONNECTORS "GeoTIFF")
    endif()
endif()

if(NFEP_HAVE_CDF)
    if(NOT TARGET NFEP::cdf_vol_connector)
        add_library(NFEP::cdf_vol_connector SHARED IMPORTED)
        set_target_properties(NFEP::cdf_vol_connector PROPERTIES
            IMPORTED_LOCATION "${NFEP_LIBRARY_DIR}/libcdf_vol_connector.so"
            INTERFACE_INCLUDE_DIRECTORIES "${NFEP_INCLUDE_DIR}"
        )
        list(APPEND NFEP_LIBRARIES NFEP::cdf_vol_connector)
        list(APPEND NFEP_VOL_CONNECTORS "CDF")
    endif()
endif()

# Provide summary information
message(STATUS "Found NFEP version ${NFEP_VERSION}")
message(STATUS "NFEP VOL connectors available: ${NFEP_VOL_CONNECTORS}")

# Check for requested components
if(NFEP_FIND_COMPONENTS)
    foreach(component ${NFEP_FIND_COMPONENTS})
        string(TOUPPER ${component} component_upper)
        if(NOT NFEP_HAVE_${component_upper})
            if(NFEP_FIND_REQUIRED_${component})
                message(FATAL_ERROR "NFEP component ${component} not available")
            else()
                message(STATUS "NFEP component ${component} not available (optional)")
            endif()
        endif()
    endforeach()
endif()

check_required_components(NFEP)
